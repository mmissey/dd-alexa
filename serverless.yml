# Welcome to Serverless!
#
# This file is the main config file for your service.
# It's very minimal at this point and uses default values.
# You can always add more config options for more control.
# We've included some commented out config examples here.
# Just uncomment any of them to get that config option.
#
# For full config options, check the docs:
#    docs.serverless.com
#
# Happy Coding!

service: dd-alexa 

provider:
  name: aws
  runtime: nodejs6.10
  profile: personal

functions:
  sendMessage:
    name: "dd-alexa"
    handler: functions/handler.handleEvent
    environment:
      SLACK_API_KEY: ${env:SLACK_API_KEY}
      SLACK_USERNAME: DD-Alexa
    events:
        - alexaSkill
  saveTranscript:
    name: "dd-transcript"
    handler: functions/saveTranscript.handleEvent
    environment:
      SLACK_API_KEY: ${env:SLACK_API_KEY}

  # backFill:
  #   name: "dd-backfill"
  #   handler: backfill.handler
  #   environment:
  #     SLACK_API_KEY: ${env:SLACK_API_KEY}

# resources:
#   Resources:
#     archives:
#       Type: AWS::S3::Bucket
#       Properties:
#         BucketName: archives
#     DynamoDbTable:
#       Type: AWS::DynamoDB::Table
#       Properties:
#         TableName: dd-channels
#         AttributeDefinitions:
#           - AttributeName: id
#             AttributeType: S
#         AttributeDefinitions:
#           - AttributeName: name
#             AttributeType: S
#         AttributeDefinitions:
#           - AttributeName: num_members
#             AttributeType: S
#         KeySchema:
#           - AttributeName: id
#             KeyType: HASH
#         ProvisionedThroughput:
#           ReadCapacityUnits: 5
#           WriteCapacityUnits: 5
#     DynamoDBIamPolicy:
#       Type: AWS::IAM::Policy
#       DependsOn: DynamoDbTable
#       Properties:
#         PolicyName: lambda-dynamodb
#         PolicyDocument:
#           Version: '2012-10-17'
#           Statement:
#             - Effect: Allow
#               Action:
#                 - dynamodb:GetItem
#                 - dynamodb:PutItem
#               Resource: arn:aws:dynamodb:*:*:table/dd-channels
#         Roles:
#           - Ref: IamRoleLambdaExecution
